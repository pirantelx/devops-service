{% extends "base.html" %}

{% block title %}{{ news.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="/news">Новости</a></li>
                    <li class="breadcrumb-item active">{{ news.title }}</li>
                </ol>
            </nav>
            <div>
                {% if user.username == news.author or user.role in ["Редактор", "DevOps"] %}
                <a href="/news/{{ news.id }}/edit" class="btn btn-outline-primary me-2">
                    <i class="fas fa-edit me-2"></i>Редактировать
                </a>
                <button type="button" class="btn btn-outline-danger" onclick="deleteNews()">
                    <i class="fas fa-trash me-2"></i>Удалить
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <h1 class="h3 mb-2">{{ news.title }}</h1>
                        <div class="d-flex align-items-center text-muted">
                            <span class="badge bg-primary me-3">{{ news.label }}</span>
                            <small>
                                <i class="fas fa-calendar me-1"></i>
                                {{ news.created_at.strftime('%d.%m.%Y в %H:%M') }}
                            </small>
                            <small class="ms-3">
                                <i class="fas fa-user me-1"></i>
                                {{ news.author }}
                            </small>
                            {% if news.updated_at %}
                            <small class="ms-3">
                                <i class="fas fa-edit me-1"></i>
                                Обновлено: {{ news.updated_at.strftime('%d.%m.%Y в %H:%M') }}
                            </small>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="news-content">
                    {{ news.content | safe | nl2br }}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Форма для удаления -->
<form id="deleteForm" method="POST" action="/news/{{ news.id }}/delete" style="display: none;">
</form>

<script>
function deleteNews() {
    if (confirm('Вы уверены, что хотите удалить эту новость? Это действие нельзя отменить.')) {
        document.getElementById('deleteForm').submit();
    }
}
</script>

<style>
.news-content {
    line-height: 1.6;
    font-size: 1.1rem;
}

.news-content p {
    margin-bottom: 1rem;
}

.news-content h1, .news-content h2, .news-content h3, .news-content h4, .news-content h5, .news-content h6 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: #2c3e50;
}

.news-content ul, .news-content ol {
    margin-bottom: 1rem;
    padding-left: 2rem;
}

.news-content blockquote {
    border-left: 4px solid #3498db;
    padding-left: 1rem;
    margin: 1rem 0;
    font-style: italic;
    color: #7f8c8d;
}

.news-content code {
    background-color: #f8f9fa;
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-family: 'Courier New', monospace;
}

.news-content pre {
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1rem 0;
}

.news-content pre code {
    background-color: transparent;
    padding: 0;
}
</style>
{% endblock %} 